浏览器原理相关

# 浏览器的缓存原理

浏览器第一次发送请求，服务端正常响应，返回状态码200并返回相应的资源。浏览器接受到后，会根据响应头中的cache-control是否有no-store来判断是否能缓存资源，如果没有，则会缓存相应的数据。如果浏览器不支持http1.1就通过expires字段。

②浏览器第二次想要加载使用该资源，首先会去查看之前缓存的相应头的max-age是否过期，如果没有过期，命中强缓存。直接使用。

如果过期了，就会根据cache-control中是否有no-cache。no-cache用于协商缓存，客户端可以使用本地缓存的资源副本，但每次使用时需要额外发送一次请求，来判断是否资源有更新。因此浏览器会额外发送一次请求，再请求头中添加if-modified-since，值为响应头的last-modified。表面服务器最后一次修改该资源的时间。或者会添加if-none-match：值为etags，是服务器资源的唯一标识，它是由content-length和last-modified组成的hash值。如果相同，就返回状态码304。



缓存位置：

service-worker：运行于js主线程外的一个独立线程，只能缓存https的响应数据。

memory-cache：内存缓存。关闭浏览器就会消失，且缓存的数据量很小，但是读取速度很快。

disc-cache：硬盘缓存，缓存容量大，但是读取速度慢





